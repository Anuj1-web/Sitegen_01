<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Wizard Maker â€” Full Toolbar Edition</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.5/FileSaver.min.js"></script>
  <link rel="stylesheet" href="./style.css">
</head>
<body>
  <div class="card">
    <h1>Wizard Maker â€” Button Fix (v11)</h1>
    <p>Upload Any (multi-page). Double-click or double-tap buttons/links/inputs to edit.</p>

    <div class="topbar">
      <input type="file" id="zipInput" accept=".zip">
      <button id="exportBtn">â¬‡ Export ZIP</button>
    </div>

    <div class="tabs" id="tabs"></div>
    <div id="iframeContainer"></div>
  </div>

  <!-- Toolbar HTML -->
  <div id="editorToolbar" style="display:none;">
    <button id="btnUndo">â®ª Undo</button>
    <button id="btnRedo">â®« Redo</button>
    <button id="btnBold"><b>B</b></button>
    <button id="btnItalic"><i>I</i></button>
    <button id="btnUnderline"><u>U</u></button>

    <select id="fontSelect">
      <option value="Arial">Arial</option>
      <option value="Verdana">Verdana</option>
      <option value="Tahoma">Tahoma</option>
      <option value="Trebuchet MS">Trebuchet MS</option>
      <option value="Times New Roman">Times New Roman</option>
      <option value="Georgia">Georgia</option>
      <option value="Courier New">Courier New</option>
      <option value="Lucida Console">Lucida Console</option>
      <option value="Impact">Impact</option>
      <option value="Comic Sans MS">Comic Sans MS</option>
    </select>

    <input type="number" id="fontSize" min="8" max="72" style="width:60px;">
    <input id="modalText" type="text" placeholder="Text / Placeholder">

    <select id="colorTarget">
      <option value="auto">Auto</option>
      <option value="text">Text Color</option>
      <option value="background">Background</option>
    </select>

    <input type="color" id="modalColor" value="#000000">
    <input type="url" id="imageUrl" placeholder="Image URL">
    <input type="file" id="imageFile" accept="image/*">

    <button id="btnDelete" style="background:#c00;">ðŸ—‘ Delete</button>
    <button id="saveBtn">Save</button>
    <button id="cancelBtn">Cancel</button>
  </div>
  <style id="__wizard_theme">
:root {
  --primary-color: #0b79ff;
  --accent-color: #06b6d4;
  --bg-color: #ffffff;
  --text-color: #000000;
}
</style>

<div id="themePanel" style="display:none;position:fixed;bottom:70px;right:20px;width:380px;background:#fff;border-radius:12px;padding:12px;box-shadow:0 12px 30px rgba(0,0,0,0.12);z-index:9999;font-family:sans-serif;">
  <h3 style="margin:0 0 10px 0;font-size:16px;">ðŸŽ¨ Themes(click again the theme if any text seem to be vanished)</h3>
  <div id="themeGrid" style="display:grid;grid-template-columns:repeat(3,1fr);gap:8px;max-height:220px;overflow:auto;"></div>
  <div style="margin-top:10px;display:flex;gap:6px;">
    <input type="color" id="primaryColor" value="#0b79ff">
    <input type="color" id="accentColor" value="#06b6d4">
    <input type="color" id="bgColor" value="#ffffff">
    <button id="applyCustomTheme">Apply</button>
    <button id="resetTheme">Reset</button>
  </div>
</div>

<div id="themeToggleBtn" style="position:fixed;bottom:80px;right:20px;background:#000;color:#fff;border-radius:50%;width:46px;height:46px;display:flex;align-items:center;justify-content:center;font-size:20px;cursor:pointer;z-index:10000;">ðŸŽ¨</div>
<!-- Floating black + button -->
<button id="openLibraryBtn" style="
  position: fixed; bottom: 20px; right: 20px;
  width: 50px; height: 50px; border-radius: 50%;
  background: #111; color: #fff; font-size: 2rem;
  border: none; cursor: pointer; z-index: 2000;">+</button>

<!-- Sidebar -->
<div id="librarySidebar" style="display:none;">
  <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:0.5rem; cursor: grab;">
    <h3 style="margin:0;color:#fff;">Library Assets</h3>
    <button id="closeLibraryBtn" style="background:none;color:#fff;font-size:1.2rem;border:none;cursor:pointer;">âœ–</button>
  </div>

  <!-- Search -->
  <input type="text" id="librarySearch" placeholder="Search..."
         style="width:100%;padding:0.3rem;margin-bottom:0.5rem;border-radius:0.25rem;border:none;background:#333;color:#fff;">

  <!-- Container -->
  <div id="libraryContainer" style="overflow-y:auto; flex:1; display:grid; grid-gap:8px; grid-template-columns: repeat(auto-fit, minmax(140px,1fr));"></div>

  <hr style="border-color:#444;margin:0.5rem 0;">

  <button id="addPageBtnSidebar"
          style="padding:0.4rem;background:#222;color:#fff;border:none;border-radius:0.25rem;cursor:pointer;">
    + Add Blank Page
  </button>
</div>

<!-- Fullscreen overlay -->
<div id="fullscreenPreview" class="flex" style="display:none;position:fixed;top:0;left:0;width:100vw;height:100vh;background:rgba(0,0,0,0.95);justify-content:center;align-items:center;z-index:3000;">
  <span class="close-btn" style="position:absolute;top:20px;right:20px;font-size:2rem;color:#fff;cursor:pointer;background:rgba(0,0,0,0.6);border-radius:50%;padding:0 8px;">âœ–</span>
  <img src="" alt="Full Preview" style="max-width:90%; max-height:90%; object-fit:contain; border-radius:4px;">
</div>

<style>
#librarySidebar {
  position: fixed;
  top: 0; right: 0;
  width: 320px; height: 100vh;
  background: #111; padding: 1rem;
  box-shadow: -4px 0 12px rgba(0,0,0,0.5);
  z-index: 1500;
  color: #fff;
  display: flex;
  flex-direction: column;
  user-select: none;
}
.library-category { font-weight:bold; margin-top:1rem; color:#fff; }
.library-subcategory { font-style:italic; font-size:0.85rem; margin-bottom:0.2rem; color:#ccc; }
.library-item { background:#222; border-radius:4px; overflow:hidden; cursor:pointer; position:relative; display:flex; flex-direction:column; }
.library-thumb {
  width: 100%;
  padding-top: 56.25%; /* 16:9 aspect ratio */
  position: relative;
  overflow: hidden;
  border-radius: 4px;
  margin-bottom: 0.5rem;
}
.library-thumb img {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  object-fit: cover;
}
.library-title {
  position: absolute;
  bottom: 0; 
  left: 0;
  width: 100%;
  padding: 4px 6px;
  font-size: 0.85rem;
  color: #fff;
  text-align: center;
  background: rgba(0,0,0,0.6);
  box-sizing: border-box;
  border-top-left-radius: 4px;
  border-top-right-radius: 4px;
}
.removePageBtn { position:absolute; top:4px; right:4px; background:#900; color:#fff; border:none; border-radius:50%; width:22px; height:22px; font-size:14px; line-height:18px; cursor:pointer; z-index:10; }
.fullscreen-btn { position:absolute; top:4px; left:4px; font-size:1.2rem; color:#fff; background: rgba(0,0,0,0.6); border-radius:4px; padding:2px 4px; cursor:pointer; z-index:10; }
</style>


<script>
document.addEventListener("DOMContentLoaded", () => {
  const storedTemplate = localStorage.getItem("wizardTemplate");
  if (storedTemplate) {
    // Convert DataURL back to blob
    fetch(storedTemplate)
      .then(res => res.blob())
      .then(blob => {
        const file = new File([blob], "template.zip", { type: "application/zip" });
        
        // Simulate upload to zipInput
        const dt = new DataTransfer();
        dt.items.add(file);
        document.getElementById("zipInput").files = dt.files;

        // Trigger the same logic as manual upload
        const event = new Event("change");
        document.getElementById("zipInput").dispatchEvent(event);

        // Clear so it doesnâ€™t auto-load again next time
        localStorage.removeItem("wizardTemplate");
      });
  }
});
</script>

  <script src="main.js"></script>
   <script src="theme.js"></script>
  <script src="library.js"></script>
  

</body>
</html>
